<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="UTF-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../resources/admin/css/admin_product.css" th:href="@{/resources/admin/css/admin_product.css}" />
		<link rel="stylesheet" type="text/css" href="../../resources/admin/css/admin_header_footer.css" th:href="@{/resources/admin/css/admin_header_footer.css}" />
		<script src="../../resources/jquery/jquery-2.2.1.min.js" th:src="@{/resources/jquery/jquery-2.2.1.min.js}" type="text/javascript" charset="utf-8"></script>
		
	</head>
	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		           
		//选择一级分类
		function men1Select(menu1Id){
			$("#menu2_brand").load([[@{/admin/product/add/ajax/menu1/}]]+menu1Id);
		}
		
		//添加
		function addmenu2(){
			$("#leve2MenuList").load([[@{/admin/category/level2/ajax/add}]],$('#menu2Form').serialize());
		}
		
		//提交检查
		function checkInput(){
			if($("#menu1Id").val().trim()==""){
				alert("請選擇一級分類");
				return false;
			}
			if($("#menu1Id").val().trim()==""){
				alert("請選擇二級分類");
				return false;
			}

			if(!confirm("確認保存？")){
				return false;
			}
		}
		
		function deleteImg(id_pre,imgId){
			if(confirm("確認刪除？")){
				$.ajax({
					url: [[@{/admin/product/edit/ajax/delimg/}]]+imgId,
					method: "POST",
					data: { 
						"imgId" : imgId,
						}
				}).done(function(ret){
					if(ret=="success"){
						$("#"+id_pre + imgId).remove();
					}
				});
			}
		}

		/*]]>*/	
	</script>
	
	<body>
		<div id="editContainer" style="padding-left:50px ;">
		<form method="post" th:action="@{/}+'admin/product/edit/save'" th:object="${productForm}" onsubmit="return checkInput()" enctype="multipart/form-data"  >
			<div style="height: 20px;">
			<!-- 占位 -->
			</div>
			<input th:type="hidden" th:field="*{productId}"></input>
			<div class="fPart1"> 
				<span>一級分類</span>
				<select class="select_" th:onchange="|men1Select(this.value)|"  th:name="menu1Id" id="menu1Id">
					<option value="0">請選擇一級分類</option>
					<option th:each="menu1 : ${menu1List}" th:value="${menu1.id}" th:text="${menu1.nameCn}" th:selected="${menu1.id==productForm.menu1Id}?1:0" >一級菜單</option>
				</select>
			</div>
			<div id="menu2_brand" th:fragment="menu2_brand" >
				<div class="fPart1"> 
					<span>二級分類</span>
					<select class="select_" th:name="menu2Id">
						<option value="0">請選擇二級分類</option>
						<option th:each="menu2 : ${menu2List}" th:value="${menu2.id}" th:text="${menu2.nameCn}" th:selected="${menu2.id==productForm.menu2Id}?1:0" >二級菜單</option>
					</select>
				</div>
				<div class="fPart1"> 
					<span style="letter-spacing: 32px; padding: 0;">品牌</span>
					<select class="select_" th:name="brandId">
						<option value="0">請選擇品牌</option>
						<option th:each="brand : ${brandList}" th:value="${brand.id}" th:text="${brand.brandNameCn}" th:selected="${brand.id==productForm.brandId}?1:0">品牌</option>
					</select>
				</div>
			</div>
			
			<div class="fPart1"> 
				<span>産品名稱（中文）</span><input style="width:500px;height: 30px;" type="text" th:field="*{productNameCn}" placeholder="1-200个字符" th:class="${#fields.hasErrors('productNameCn')}? errorclass"/>
			</div>
			<div class="fPart1"> 
				<span>産品名稱（英文）</span><input style="width:500px;height: 30px;" type="text" th:field="*{productNameEn}" placeholder="1-200个字符"  th:class="${#fields.hasErrors('productNameEn')}? errorclass"/>
			</div>
			<div class="fPart1"> 
				<span>産品备注</span><input style="width:500px;height: 30px;margin-left: 64px;" type="text" th:field="*{memo}" placeholder="1-200个字符"  th:class="${#fields.hasErrors('memo')}? errorclass"/>
			</div>
			<div class="fLine"></div>
			<div class="fpart4">
				<div style="display: flex;" th:each="listImg : ${productForm.listImgList}" th:id="|list_img_${listImg.id}|">
					<div >
						<img alt="" th:src="|@{/}${listImg.href}|"  ></img>
						<input type="button" th:value="X" style="color:red;cursor: pointer;" th:onclick="|deleteImg('list_img_',${listImg.id})|"></input>
					</div>
				</div>
			</div>
			<div class="fpart4">
				<span class="spanLS">産品展示圖(3张)</span>
				<input type="file" id="listImgs" th:name="listImgs" multiple="multiple" />
			</div>
			
			<div class="fpart4"  >
				<div style="display: flex;" th:each="descImg : ${productForm.descImgList}" th:id="|desc_img_${descImg.id}|">
					<div >
						<img alt="" th:src="|@{/}${descImg.href}|"  ></img>
						<input type="button" th:value="X" style="color:red;cursor: pointer;" th:onclick="|deleteImg('desc_img_',${descImg.id})|"></input>
					</div>
				</div>
			</div>
			
			
			<div class="fpart4" style="display: flex;">
				<span class="spanLS">産品描述图</span>&nbsp;
				<input type="file" id="descImgs" th:name="descImgs" multiple="multiple"  />
			</div>
	
			<div class="fPart5">
				<div class="fPart5L">
					<span class="spanLS">産品關鍵詞</span><input type="text" placeholder="1-200个字符"  th:field="*{productLable}" th:class="${#fields.hasErrors('productLable')}? errorclass" />
					<span class="spanLS">産品條形碼</span><input type="text" placeholder="1-100个字符"  th:field="*{mpn}" th:class="${#fields.hasErrors('mpn')}? errorclass" />
				</div>
				<div class="fPart5S">
					<span>成本</span><input type="text" th:field="*{cost}"  placeholder="数值"  th:class="${#fields.hasErrors('cost')}? errorclass"/>
					<span>單價</span><input type="text" th:field="*{price1}" placeholder="数值"  th:class="${#fields.hasErrors('price1')}? errorclass"/>
				</div>
				<div class="fPart5S">
					<span>重量</span><input type="text" th:field="*{weight}" placeholder="数值"  th:class="${#fields.hasErrors('weight')}? errorclass"/>
					<span>庫存</span><input type="text" th:field="*{stock}"  placeholder="数值" th:class="${#fields.hasErrors('stock')}? errorclass"/>
					<span>已賣</span><input type="text" th:field="*{soldNum}"  placeholder="数值" th:class="${#fields.hasErrors('soldNum')}? errorclass"/>
				</div>
				<div class="fPart5R">
					<span style="margin-right: 15px;">産品狀態</span>
					<input type="radio" th:name="status" id="stats0"  th:checked="${productForm.status==0}?1:0" th:value="0" /><label for="stats0">離線</label>
					<input type="radio" th:name="status" id="stats1" th:checked="${productForm.status==1}?1:0"  th:value="1"  /><label for="stats1">在線</label>
					<input type="radio" th:name="status" id="stats2" th:checked="${productForm.status==2}?1:0"  th:value="2"  /><label for="stats2">缺貨</label>
				</div>
	
				<div class="fPart5C" >
					<input type="checkbox" id="hot" th:name="hot" th:value="1" th:checked="${productForm.hot==1}?1:0"   /><label for="hot">熱銷</label>&nbsp;
					<input type="checkbox" id="promote" th:name="promote" th:value="1" th:checked="${productForm.promote==1}?1:0"  /><label for="promote">促銷</label>&nbsp;
					<input type="checkbox" id="frontPage" th:name="frontPage" th:value="1" th:checked="${productForm.frontPage==1}?1:0" /><label for="frontPage">首頁</label>&nbsp;
					<input type="checkbox" id="recommend" th:name="recommend" th:value="1" th:checked="${productForm.recommend==1}?1:0"  /><label for="recommend">推薦</label>&nbsp;
				</div>
					<div class="buttom">
						<input class="fSubmit" type="submit" value="保存" />
						<div style="flex: 1;"></div>
						<input class="fSubmit" type="reset" value="取消" />
					</div>
				<!--<div class="fPart5S">
				</div>-->
			</div>
		</form>
		</div>
	</body>

</html>